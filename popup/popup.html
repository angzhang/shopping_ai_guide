<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping AI Guide</title>
    <link rel="stylesheet" href="popup.css">
</head>
<body>
    <div class="popup-container">
        <header class="popup-header">
            <h1>üõçÔ∏è Shopping AI Guide</h1>
            <p>Select product images and send to AI for comparison</p>
        </header>
        
        <main class="popup-main">
            <div class="action-section">
                <button id="start-selection" class="primary-button">
                    üì∏ Start Image Selection
                </button>
                <p class="help-text">Click to start selecting product images on the current page</p>
            </div>
            
            <div class="status-section" id="status-section" style="display: none;">
                <div class="status-item">
                    <span class="status-label">Selected Images:</span>
                    <span class="status-value" id="selected-count">0</span>
                </div>
                <div class="status-item">
                    <span class="status-label">Last Analysis:</span>
                    <span class="status-value" id="last-analysis">Never</span>
                </div>
            </div>
            
            <div class="settings-section">
                <div id="gemini-api-section" class="api-key-section">
                    <h3>Gemini API Key</h3>
                    <div class="api-key-input-group">
                        <input type="password" id="gemini-api-key" class="api-key-input" placeholder="Enter your Gemini API key">
                        <button id="toggle-api-key" class="icon-button" title="Show/Hide API Key">üëÅÔ∏è</button>
                    </div>
                    <p class="help-text">Get your free API key from <a href="https://makersuite.google.com/app/apikey" target="_blank">Google AI Studio</a></p>
                    <div id="api-key-status" class="api-key-status" style="display: none;"></div>
                </div>

                <div class="model-selection">
                    <h3>Gemini Model</h3>
                    <select id="gemini-model" class="llm-select">
                        <option value="gemini-2.5-flash" selected>Gemini 2.5 Flash (Recommended)</option>
                        <option value="gemini-2.5-pro">Gemini 2.5 Pro (Most Capable)</option>
                        <option value="gemini-3-pro-preview">Gemini 3 Pro Preview (Latest)</option>
                        <option value="gemini-2.5-flash-lite">Gemini 2.5 Flash Lite (Fastest)</option>
                        <option value="gemini-2.0-flash">Gemini 2.0 Flash</option>
                        <option value="gemini-1.5-flash">Gemini 1.5 Flash (Stable)</option>
                        <option value="gemini-1.5-pro">Gemini 1.5 Pro (Stable)</option>
                    </select>
                    <p class="help-text">Select which Gemini model to use for product analysis</p>
                </div>
            </div>
            
            <div class="recent-section" id="recent-section" style="display: none;">
                <h3>Recent Selection</h3>
                <div class="recent-item">
                    <div class="recent-info">
                        <span class="recent-provider" id="recent-provider">-</span>
                        <span class="recent-time" id="recent-time">-</span>
                    </div>
                    <button id="resend-recent" class="secondary-button">Send Again</button>
                </div>
            </div>
        </main>
        
        <footer class="popup-footer">
            <div class="instructions">
                <h4>How to use:</h4>
                <ol>
                    <li>Add your Gemini API key above</li>
                    <li>Click "Start Image Selection"</li>
                    <li>Select product images on the page</li>
                    <li>Click "Analyze with Gemini" to get AI comparison</li>
                </ol>
            </div>
        </footer>
    </div>
    
    <script src="popup.js"></script>
</body>
</html>